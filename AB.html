<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>A/B 테스트 – 단일 HTML (배너형 A=단순, B=복잡)</title>

  <!-- GA4: Measurement ID로 교체하세요 (예: G-ABC123DEF4) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-C74302RKGY"></script>
  <script>
    // GA4 베이직 설정
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-C74302RKGY');
    function gaEvent(name, params){ try { gtag('event', name, params); } catch(e){} }
  </script>

  <style>
    :root{
      --pink:#ffe6ef; /* B 배경 */
      --ink:#101012;
      --muted:#5b5e7a;
      --accent:#0057ff;
      --accent-2:#ff2e80;
      --ring:#c6d5ff;
      --radius:18px;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0; font-family:Pretendard, Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif;
      color:var(--ink);
      background:#fff; /* A 기본 */
      display:grid; place-items:center; min-height:100vh;
    }

    /* 공통 배너 컨테이너 */
    .banner{ width:min(1100px, 94vw); }

    /* A: 단순 배너 */
    .simple{
      border:1px solid #e6e8f2; border-radius:var(--radius);
      padding:42px; text-align:center; background:#ffffff;
      box-shadow:0 8px 24px rgba(0,0,0,.06);
    }
    .simple .eyebrow{ letter-spacing:.16em; text-transform:uppercase; color:#7b7f99; font-size:12px; }
    .simple h1{ margin:10px 0 8px; font-size:clamp(24px,4vw,40px); line-height:1.1; font-weight:800; }
    .simple p{ margin:0 0 18px; color:#666a86; font-size:clamp(14px,2vw,18px); }
    .btn{ cursor:pointer; border:1px solid transparent; border-radius:12px; padding:14px 18px; font-weight:800; }
    .btn.primary{ background:var(--ink); color:#fff; }
    .btn.ghost{ background:transparent; color:#2b2f55; border-color:#c9cbe0; }

    /* B: 복잡 배너 */
    .complex-wrap{ background:var(--pink); border-radius:var(--radius); border:1px solid #ffc4d8; overflow:hidden; }
    .complex{
      display:grid; grid-template-columns: 1.1fr .9fr; gap:28px; align-items:center;
      padding:32px; position:relative;
    }
    @media (max-width: 900px){ .complex{ grid-template-columns:1fr; } }

    .badges{ display:flex; gap:8px; flex-wrap:wrap; }
    .badge{ background:#ffffffcc; border:1px solid #ffd3e3; color:#6b1a36; padding:6px 10px; border-radius:999px; font-size:12px; font-weight:700; }
    .headline{ font-size:clamp(26px,4.2vw,44px); line-height:1.1; margin:12px 0 10px; font-weight:900; }
    .sub{ color:#6b1a36; font-size:clamp(14px,2vw,18px); margin:0 0 18px; }

    .cta-row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .btn.grad{ background:linear-gradient(135deg, var(--accent), var(--accent-2)); color:#fff; box-shadow:0 10px 20px rgba(255,46,128,.25); }
    .note{ font-size:12px; color:#7a2040; }

    .product{
      aspect-ratio: 4/3; border:2px dashed #ffb3ca; border-radius:16px; background:#fff8fb;
      display:grid; place-items:center; color:#cc3b72; font-weight:800;
    }

    /* 장식 */
    .confetti{ position:absolute; inset:0; pointer-events:none; }
    .dot{ position:absolute; width:8px; height:8px; border-radius:50%; background:#ff6aa5; opacity:.5; }

    footer{ margin-top:14px; font-size:12px; color:#7f84a8; text-align:center; }
    code{ background:#f3f5ff; border:1px solid #dee3ff; color:#2b2f55; padding:2px 6px; border-radius:6px; }
  </style>
</head>
<body>
  <main id="root" class="banner" role="main" aria-live="polite" aria-atomic="true"></main>
  <footer>단일 HTML · 새로고침 시 무작위 A/B · 강제 테스트: URL에 <code>?v=A</code> 또는 <code>?v=B</code></footer>

  <script>
    // ─────────────────────────────────────────────────────────────
    // 랜덤 배정 (매 로드마다) + 쿼리로 강제 (?v=A|B)
    // ─────────────────────────────────────────────────────────────
    function getQueryVariant(){
      const v = new URLSearchParams(location.search).get('v');
      return (v==='A'||v==='B') ? v : null;
    }
    function randomVariant(){ return Math.random() < 0.5 ? 'A' : 'B'; }
    const variant = getQueryVariant() || randomVariant();

    // 렌더러
    const root = document.getElementById('root');

    function renderA(){
      document.body.style.background = '#ffffff';
      root.innerHTML = `
        <section class="simple" aria-label="단순 배너">
          <div class="eyebrow">한정 혜택</div>
          <h1>오늘 주문하면 내일 도착</h1>
          <p>빠른 배송 · 전액 환불 보장</p>
          <div>
            <button id="ctaBuy" class="btn primary">구매하기</button>
            <button id="ctaMore" class="btn ghost">자세히 보기</button>
          </div>
        </section>
      `;
    }

    function renderB(){
      document.body.style.background = 'var(--pink)';
      root.innerHTML = `
        <section class="complex-wrap" aria-label="복잡 배너">
          <div class="complex">
            <div>
              <div class="badges">
                <span class="badge">베스트셀러</span>
                <span class="badge">오늘만 15% OFF</span>
                <span class="badge">무료 반품</span>
              </div>
              <h2 class="headline">후회 없는 선택, 지금 가장 많이 사는 그 제품</h2>
              <p class="sub">사용자 98%가 추천한 베스트 픽. 품절 전에 잡으세요.</p>
              <div class="cta-row">
                <button id="ctaBuy" class="btn grad">지금 구매</button>
                <button id="ctaMore" class="btn ghost">자세히 보기</button>
                <span class="note">남은 수량: 24개 · 평균 배송 24H</span>
              </div>
            </div>
            <div class="product">이미지 영역(샘플)</div>
            <svg class="confetti" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true"></svg>
          </div>
        </section>
      `;
      // 간단한 장식 점 몇 개
      const confetti = root.querySelector('.confetti');
      for(let i=0;i<10;i++){
        const d = document.createElement('div');
        d.className='dot'; d.style.left=Math.random()*100+'%'; d.style.top=Math.random()*100+'%';
        d.style.opacity=0.25 + Math.random()*0.5; d.style.transform=`scale(${0.6+Math.random()*1.2})`;
        confetti.appendChild(d);
      }
    }

    if(variant === 'A') renderA(); else renderB();

    // GA4 노출 이벤트
    gaEvent('view_variant', { variant });

    // 클릭 추적(델리게이션)
    document.addEventListener('click', (e)=>{
      const t = e.target;
      if(t && t.id === 'ctaBuy'){
        gaEvent('purchase_click', { variant, cta:'buy', banner: variant==='A'?'simple':'complex' });
      }
      if(t && t.id === 'ctaMore'){
        gaEvent('learn_more', { variant, cta:'more', banner: variant==='A'?'simple':'complex' });
      }
    });
  </script>
</body>
</html>
